# M3 æ­£åˆ™ç³»ç»¼ä¸é…åˆ†å‡½æ•° Z

> **æ ¸å¿ƒç›®æ ‡**ï¼šå‘Šåˆ«ç—›è‹¦çš„ç»„åˆæ•°è®¡ç®—ã€‚æŒæ¡**é…åˆ†å‡½æ•°ï¼ˆPartition Function, Zï¼‰**è¿™ä¸€è¶…çº§å·¥å…·ã€‚åªè¦ç®—å‡ºäº† \(Z\)ï¼Œæ‰€æœ‰çƒ­åŠ›å­¦é‡ï¼ˆ\(F, S, U, P\)ï¼‰éƒ½åªæ˜¯å®ƒçš„å¯¼æ•°ã€‚è¿™æ˜¯ç»Ÿè®¡ç‰©ç†ä¸­æœ€å¸¸ç”¨çš„ç³»ç»¼ã€‚

## æ¨èå­¦ä¹ é¡ºåº
1. é€šè¯»æœ¬æ–‡ Part 1â€“4ï¼Œç†è§£ä¸ºä»€ä¹ˆ \(Z\) è¢«ç§°ä¸ºâ€œç”Ÿæˆå‡½æ•°â€ã€‚
2. åš `exercises/written/M3_lnZ_derivatives.md`ï¼Œäº²æ‰‹è¯æ˜ \(\langle E \rangle = -\partial_\beta \ln Z\)ã€‚
3. å¯¹ç…§ Swendsen Chapter 10ï¼Œçœ‹æ‡‚ç®€å•çš„ä¸¤èƒ½çº§ç³»ç»Ÿä¾‹å­ã€‚

---

## Introductionï¼ˆåŒ–ç¹ä¸ºç®€çš„æ™ºæ…§ï¼‰

åœ¨ M2ï¼ˆå¾®æ­£åˆ™ç³»ç»¼ï¼‰é‡Œï¼Œæˆ‘ä»¬ç”¨ \(\Omega(E)\) è®¡æ•°ã€‚è¿™å¾ˆåŸºæœ¬ï¼Œä½†åœ¨æ•°å­¦ä¸Šæå…¶ç—›è‹¦â€”â€”è®¡ç®—é«˜ç»´çƒçš„ä½“ç§¯æˆ–å¤æ‚çš„ç»„åˆæ•°å¾€å¾€å¾ˆéš¾ã€‚
Gibbs (1902) å¼•å…¥æ­£åˆ™ç³»ç»¼ï¼ˆCanonical Ensembleï¼‰ä¸ä»…æ˜¯ä¸ºäº†å¤„ç†â€œæ’æ¸©â€å®éªŒï¼Œæ›´æ˜¯ä¸ºäº†**æ•°å­¦ä¸Šçš„è§£è„±**ã€‚é€šè¿‡å¼•å…¥ä¸€ä¸ªå‡æƒ³çš„çƒ­æµ´ï¼ˆHeat Bathï¼‰ï¼Œç‰¹å®šçš„èƒ½é‡ \(E\) ä¸å†æ˜¯â€œå¿…é¡»ä¸¥æ ¼æ»¡è¶³â€çš„ç¡¬çº¦æŸï¼Œè€Œæ˜¯å˜æˆäº†ä¸€ä¸ªæ¦‚ç‡äº‹ä»¶ \(p \propto e^{-\beta E}\)ã€‚

è¿™ç§å˜æ¢ï¼ˆLaplace å˜æ¢ï¼‰æŠŠè‰°éš¾çš„â€œç¡¬çƒæˆªé¢ä½“ç§¯è®¡ç®—â€ï¼ˆå¾®æ­£åˆ™ï¼‰å˜æˆäº†ä¼˜é›…çš„â€œæŒ‡æ•°ç§¯åˆ†â€ï¼ˆæ­£åˆ™ï¼‰ã€‚é…åˆ†å‡½æ•° \(Z\) åŒ…å«äº†ç³»ç»Ÿçš„å…¨éƒ¨ä¿¡æ¯ï¼Œå®ƒæ˜¯é€šå¾€å®è§‚æ€§è´¨çš„å”¯ä¸€æ¡¥æ¢ã€‚

## Referencesï¼ˆSeminal papersï¼ŒSSOTï¼‰
- **Gibbs 1902**: *Elementary Principles in Statistical Mechanics*. (æ¡ç›®è§ `references/seminal_papers.md` SP-M3-Gibbs1902)

---

## Part 1ï¼šä»â€œå­¤å®¶å¯¡äººâ€åˆ°â€œä¸é‚»ä¸ºä¼´â€

M2 é‡Œçš„ç³»ç»Ÿæ˜¯**å­¤ç«‹**çš„ï¼ˆEnergy fixedï¼‰ï¼Œè¿™å«å¾®æ­£åˆ™ã€‚ä½†ç°å®ä¸­å¤§éƒ¨åˆ†ç³»ç»Ÿéƒ½ä¸ç¯å¢ƒäº¤æ¢èƒ½é‡ï¼ˆTemperature fixedï¼‰ã€‚
å½“æˆ‘ä»¬æŠŠä¸€ä¸ªå°ç³»ç»Ÿä¸ä¸€ä¸ªå·¨å¤§çš„**çƒ­åº“ï¼ˆReservoirï¼‰**è€¦åˆæ—¶ï¼Œå°ç³»ç»Ÿå¤„äºæŸä¸ªå¾®è§‚æ€ \(i\) çš„æ¦‚ç‡ä¸å†ç›¸ç­‰ï¼Œè€Œæ˜¯å–å†³äºå®ƒçš„èƒ½é‡ \(E_i\)ï¼š

\[ p_i = \frac{1}{Z} e^{-\beta E_i} \]

è¿™é‡Œçš„ \(\beta = 1/k_B T\) æ˜¯çƒ­åº“â€œå¼ºåŠ â€ç»™ç³»ç»Ÿçš„æ¸©åº¦å‚æ•°ã€‚èƒ½é‡è¶Šä½çš„çŠ¶æ€ï¼Œæ¦‚ç‡è¶Šå¤§ï¼›æ¸©åº¦è¶Šé«˜ï¼ˆ\(\beta\) è¶Šå°ï¼‰ï¼Œé«˜èƒ½æ€çš„æœºä¼šå°±è¶Šå¤šã€‚

> ğŸ‘‰ **æ·±å…¥ç†è§£**ï¼š
> - [[æ­£åˆ™ç³»ç»¼ Canonical ensemble]]ï¼šæ¨å¯¼ç»†èŠ‚ã€‚
> - [[å¾®æ­£åˆ™åˆ°æ­£åˆ™çš„ç­‰ä»·æ€§]]ï¼šåœ¨å¤§ç³»ç»Ÿæé™ä¸‹ï¼Œä¸¤è€…ä¸ºä½•æ®Šé€”åŒå½’ï¼Ÿ

---

## Part 2ï¼šé…åˆ†å‡½æ•° Zâ€”â€”ç‰©ç†å­¦çš„â€œå“ˆå¸Œå€¼â€

\[ Z = \sum_i e^{-\beta E_i} \]

ä¹ä¸€çœ‹ \(Z\) åªæ˜¯ä¸ªå½’ä¸€åŒ–å¸¸æ•°ï¼ˆä¸ºäº†è®© \(\sum p_i = 1\)ï¼‰ã€‚ä½†å®ƒå…¶å®æ˜¯**ç”Ÿæˆå‡½æ•°ï¼ˆGenerating Functionï¼‰**ã€‚
è¿™å°±å¥½æ¯”ä½ æœ‰ä¸€ä¸ªå¤šé¡¹å¼ \(f(x) = \sum a_n x^n\)ï¼Œå®ƒçš„ç³»æ•° \(a_n\) è—ç€ä¿¡æ¯ã€‚å¯¹ \(Z\) è€Œè¨€ï¼š
- å–å¯¹æ•°ï¼š\(F = -k_B T \ln Z\)ï¼ˆç›´æ¥å¾—åˆ°è‡ªç”±èƒ½ï¼ï¼‰
- æ±‚ä¸€é˜¶å¯¼ï¼š\(\langle E \rangle = -\frac{\partial \ln Z}{\partial \beta}\)ï¼ˆå¾—åˆ°å†…èƒ½ï¼‰
- æ±‚å¯¹ä½“ç§¯å¯¼æ•°ï¼š\(P = k_B T \frac{\partial \ln Z}{\partial V}\)ï¼ˆå¾—åˆ°å‹å¼ºï¼‰

**è®°ä½ï¼šZ çŸ¥é“ä¸€åˆ‡ã€‚** ä½ ä¸éœ€è¦å»åˆ†åˆ«å¯¹ \(E\) æˆ– \(P\) ç§¯åˆ†ï¼Œä½ åªéœ€è¦æŠŠ \(Z(\beta, V, N)\) ç®—å‡ºæ¥ï¼Œç„¶åæ±‚å¯¼å°±è¡Œäº†ã€‚

> ğŸ‘‰ **Swendsen å¯¹åº”**ï¼šChapter 10, Eq 10.1â€“10.9ã€‚çœ‹ä»–å¦‚ä½•ä» \(Z\) å¯¼å‡º \(U\) å’Œ \(P\)ã€‚

---

## Part 3ï¼šæ¶¨è½ä¸å“åº”â€”â€”ç¡¬å¸çš„ä¸¤é¢

æ­£åˆ™ç³»ç»¼é‡Œçš„èƒ½é‡ä¸æ˜¯å¸¸æ•°ï¼Œå®ƒåœ¨æ¶¨è½ã€‚
ä½ å¯èƒ½ä¼šé—®ï¼š**â€œæ—¢ç„¶èƒ½é‡åœ¨å˜ï¼Œå‡­ä»€ä¹ˆç”¨çƒ­åŠ›å­¦å†…èƒ½ \(U\)ï¼ˆä¸€ä¸ªå®šå€¼ï¼‰æ¥ä»£è¡¨å®ƒï¼Ÿâ€**

ç­”æ¡ˆåœ¨äº**å¤§æ•°å®šå¾‹**ã€‚ç›¸å¯¹æ¶¨è½ \(\frac{\sigma_E}{\langle E \rangle} \sim \frac{1}{\sqrt{N}}\)ã€‚å¯¹äº \(10^{23}\) ä¸ªç²’å­ï¼Œæ¶¨è½æå°ï¼Œå¯ä»¥å¿½ç•¥ã€‚
ä½†è¿™ä¸ªæ¶¨è½æœ¬èº«æä¸ºé‡è¦ï¼Œå®ƒä¸ç³»ç»Ÿçš„**çƒ­å®¹ï¼ˆHeat Capacityï¼‰**ç›´æ¥ç›¸å…³ï¼š
\[ \text{Var}(E) = k_B T^2 C_V \]
è¿™å°±æ˜¯è‘—åçš„**æ¶¨è½-è€—æ•£å®šç†**çš„é›å½¢ï¼š**å®è§‚ä¸Šå¯¹æ¸©åº¦å˜åŒ–çš„â€œå“åº”èƒ½åŠ›â€ï¼ˆçƒ­å®¹ï¼‰ï¼Œæœ¬è´¨ä¸Šæºäºå¾®è§‚ä¸Šèƒ½é‡çš„â€œè‡ªå‘æ¶¨è½â€ã€‚**

> ğŸ‘‰ [[æ¶¨è½-å“åº”å…³ç³» Fluctuation-response relation]]ï¼šç»Ÿè®¡ç‰©ç†æœ€æ·±åˆ»çš„ç»“è®ºä¹‹ä¸€ã€‚

---

## Part 4ï¼šåŸå¸‚æ˜ å°„â€”â€”ç¦»æ•£é€‰æ‹© (Logit)

åœ¨åŸå¸‚æ¨¡å‹ä¸­ï¼Œæ­£åˆ™ç³»ç»¼å¯¹åº”ç€æœ€ç»å…¸çš„ **Logit æ¨¡å‹ï¼ˆMultinomial Logit, MNLï¼‰**ã€‚
- **å¾®è§‚æ€**ï¼šä¸ªä½“çš„é€‰æ‹©ï¼ˆå¦‚ï¼šé€‰å“ªæ¡è·¯ï¼Œä¹°å“ªä¸ªæˆ¿ï¼‰ã€‚
- **èƒ½é‡ \(E\)**ï¼šå¹¿ä¹‰æˆæœ¬ï¼ˆæ—¶é—´ã€ç¥¨ä»·ã€èˆ’é€‚åº¦ï¼‰ã€‚
- **æ¸©åº¦ \(\beta\)**ï¼šé€‰æ‹©çš„æ•æ„Ÿåº¦ï¼ˆæˆ–ä¸ç†æ€§ç¨‹åº¦ï¼‰ã€‚
- **é…åˆ†å‡½æ•° \(Z\)**ï¼šåˆ†æ¯ä¸Šçš„ \(\sum e^{-\beta C_i}\)ã€‚

åœ¨äº¤é€šæ•™æé‡Œï¼Œ\(\ln Z\) è¢«ç§°ä¸º **Inclusive Value (æœŸæœ›æœ€å¤§æ•ˆç”¨)**ï¼Œå®ƒè¡¡é‡äº†â€œè¿™ä¸€ç»„é€‰é¡¹æ•´ä½“æœ‰å¤šå¥½â€ã€‚å¦‚æœæ”¿åºœæ–°ä¿®äº†ä¸€æ¡è·¯ï¼ˆå¢åŠ ä¸€ä¸ªä½ \(E\) çŠ¶æ€ï¼‰ï¼Œ\(Z\) å¢å¤§ï¼Œ\(\ln Z\) å¢å¤§ï¼Œä»£è¡¨å±…æ°‘ç¦åˆ©æå‡ã€‚è¿™ä¸ç‰©ç†ä¸­ \(F\)é™ä½ï¼ˆç¦åˆ©æå‡ï¼‰æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚

> ğŸ‘‰ [[Logit Softmax ä¸ Boltzmann ä»¥åŠ log-sum-exp è‡ªç”±èƒ½]]ï¼šä¸¤ä¸ªé¢†åŸŸçš„ Rosetta Stoneã€‚

---

## Part 5ï¼šåŠ¨æ‰‹æ—¶åˆ» (Checklist)

### å¿…è¯»
- [ ] **Reading Guide**: [[Swendsen_Ch10_Canonical]] (Chapter 10: 10.1-10.5)
  > ç‚¹å‡»æŸ¥çœ‹æ­£åˆ™ç³»ç»¼å…¬å¼é”šç‚¹ã€‚é‡ç‚¹çœ‹ $Z$ ä¸ $F$ çš„æ¡¥æ¥ã€‚
- [ ] **Seminal Paper**: Gibbs 1902 çš„å‰è¨€ï¼ˆå¯é€‰ï¼‰ã€‚

### ä¹ é¢˜
- [ ] **Written**: `exercises/written/M3_lnZ_derivatives.md`
  - æ ¸å¿ƒä»»åŠ¡ï¼šè¯æ˜ \(\langle E \rangle = -\partial_\beta \ln Z\) å’Œ \(\text{Var}(E) = \partial^2 \ln Z\)ã€‚
- [ ] **Notebook**: `exercises/notebooks/E03_canonical_analytic.ipynb` (å¦‚æœ‰)
  - è®¡ç®—ä¸¤èƒ½çº§ç³»ç»Ÿçš„ \(Z\) å’Œ \(C_V(T)\) æ›²çº¿ï¼ˆSchottky anomalyï¼‰ã€‚

### éªŒæ”¶æ ‡å‡†
- [ ] ç»™ä½ ä¸€ä¸ªèƒ½çº§è°± \(E_n = n\epsilon\)ï¼Œèƒ½ç«‹åˆ»å†™å‡º \(Z\) çš„å‡ ä½•çº§æ•°æ±‚å’Œå½¢å¼ã€‚
- [ ] çœ‹åˆ° \(F = -kT \ln Z\)ï¼Œèƒ½ååº”å‡ºè¿™æ˜¯ä»å¾®è§‚é€šå‘å®è§‚çš„æ¡¥æ¢ã€‚
- [ ] ç†è§£ä¸ºä»€ä¹ˆåŸå¸‚äº¤é€šé‡Œçš„ Logit å…¬å¼åˆ†æ¯å°±æ˜¯é…åˆ†å‡½æ•°ã€‚
